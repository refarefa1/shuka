import{d as N,u as S,r as C,o as x,c as g,a as l,b as s,e as c,f as T,t as d,g as V,h as I,i as k,j as u,k as $,l as R}from"./index-a4fc1887.js";const j={class:"fruit-details"},w={key:0,class:"fruit-modal"},A={class:"fruit-img"},D=["src"],E={class:"fruit-info"},M={class:"title"},U=s("h2",null,'1 ק"ג',-1),q={class:"price"},z={class:"actions"},G={key:1,class:"cart-actions"},K=N({__name:"fruit-details",setup(H){const m=I(),h=R(),n=S(),f=C(!1),i=C(0);x(()=>{B(),_()});function B(){const t=m.params.id;n.getFruitById(t)}function r(t,e){let a=b(e);const y={type:t,amount:a,fruit:o.value};n.handleCart(y),setTimeout(()=>{_();const F={...o.value,amount:i};k.emit("show-msg",F),k.emit("change-cart",null)},0)}function b(t){let e;if(t!=null&&t.target&&(e=+(t==null?void 0:t.target.textContent),isNaN(e))){t.target.innerText=i.value;return}return e}function _(){if(!v.value)return;const t=v.value.find(e=>e._id==m.params.id);f.value=!!t,t&&(i.value=t.amount||0)}function p(){n.removeFruit(),h.back()}const o=g(()=>n.selectedFruit),v=g(()=>n.cartItems);return(t,e)=>(u(),l("section",j,[s("div",{class:"black-screen",onClick:p}),c(o)?(u(),l("div",w,[s("span",{onClick:p,class:"close-modal"},[T($)]),s("div",A,[s("img",{src:c(o).imgUrl,alt:""},null,8,D)]),s("div",E,[s("div",M,[s("h1",null,d(c(o).name),1),U]),s("div",q,[s("h3",null,"₪"+d(c(o).price),1)]),s("div",z,[f.value?(u(),l("div",G,[s("button",{onClick:e[1]||(e[1]=a=>r("addToCart"))},"+"),s("span",{onBlur:e[2]||(e[2]=a=>r("setCartAmount",a)),contenteditable:"true"},d(i.value),33),s("button",{onClick:e[3]||(e[3]=a=>r("removeFromCart"))},"-")])):(u(),l("button",{key:0,onClick:e[0]||(e[0]=a=>r("addToCart")),class:"add-to-cart-cta"},"הוסף לעגלה"))])])])):V("",!0)]))}});export{K as default};
