import{d as F,u as N,r as C,o as S,c as k,a as l,b as s,e as u,f as x,t as d,g as T,h as V,i as I,j as c,k as $,l as R}from"./index-b78ec336.js";const j={class:"fruit-details"},w={key:0,class:"fruit-modal"},A={class:"fruit-img"},D=["src"],E={class:"fruit-info"},M={class:"title"},U=s("h2",null,'1 ק"ג',-1),q={class:"price"},z={class:"actions"},G={key:1,class:"cart-actions"},K=F({__name:"fruit-details",setup(H){const m=V(),g=R(),n=N(),f=C(!1),i=C(0);S(()=>{h(),_()});function h(){const t=m.params.id;n.getFruitById(t)}function r(t,e){let a=B(e);const b={type:t,amount:a,fruit:o.value};n.handleCart(b),setTimeout(()=>{_();const y={...o.value,amount:i};I.emit("show-msg",y)},0)}function B(t){let e;if(t!=null&&t.target&&(e=+(t==null?void 0:t.target.textContent),isNaN(e))){t.target.innerText=i.value;return}return e}function _(){if(!v.value)return;const t=v.value.find(e=>e._id==m.params.id);f.value=!!t,t&&(i.value=t.amount||0)}function p(){n.removeFruit(),g.back()}const o=k(()=>n.selectedFruit),v=k(()=>n.cartItems);return(t,e)=>(c(),l("section",j,[s("div",{class:"black-screen",onClick:p}),u(o)?(c(),l("div",w,[s("span",{onClick:p,class:"close-modal"},[x($)]),s("div",A,[s("img",{src:u(o).imgUrl,alt:""},null,8,D)]),s("div",E,[s("div",M,[s("h1",null,d(u(o).name),1),U]),s("div",q,[s("h3",null,"₪"+d(u(o).price),1)]),s("div",z,[f.value?(c(),l("div",G,[s("button",{onClick:e[1]||(e[1]=a=>r("addToCart"))},"+"),s("span",{onBlur:e[2]||(e[2]=a=>r("setCartAmount",a)),contenteditable:"true"},d(i.value),33),s("button",{onClick:e[3]||(e[3]=a=>r("removeFromCart"))},"-")])):(c(),l("button",{key:0,onClick:e[0]||(e[0]=a=>r("addToCart")),class:"add-to-cart-cta"},"הוסף לעגלה"))])])])):T("",!0)]))}});export{K as default};
